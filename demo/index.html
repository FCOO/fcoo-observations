<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="da" style="font-size: 100%">
<head>
	<title>fcoo.dk - fcoo-observations - Demo</title>
	<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv='x-dns-prefetch-control' content='on'>

	<meta name='copyright' content='FCOO'>
	<meta name='owner' content='FCOO'>

    <link  href="bower_components.css" rel="stylesheet">
    <link  href="../src/fcoo-observations.css" rel="stylesheet">
    <!-- <link  href="css/all.css" rel="stylesheet"> -->

    <style>
        html, body {
            padding: 0; margin: 0; width:100%; height:100%;
        }

        #map0, #map1 {
            padding: 0; margin: 0; min-width:98%; height:600px;
        }
    </style>


</head>

<body>
<!-- <i class="fas fa-cloud"></i>
<span class="fa-stack fa-2x">
    <i class="fas fa-water fa-stack-1x" style="color:gray"></i>
    <i class="fas fa-thermometer-half fa-stack-1x"></i>
</span>
<span class="fa-stack fa-2x">
    <i class="fas fa-water fa-stack-1x" style="color:gray"></i>
    <i class="fas fa-percentage fa-stack-1x"></i>
</span>
 -->
 <table class="map-table" style="height:600px; width:100%">
 <tr style="height: 600px; vertical-align:top">
    <td><div id="map0" ></div></td>
    <td><div id="map1" ></div></td>
 </tr>
 <tr style="vertical-align:top">
    <td>
        <button id="map0_sealevel"  onClick="toggle(0, 'SEALEVEL')">Toggle Sea Level</button>
        <!-- <button id="map0_wind"      onClick="toggle(0, 'WIND')">Toggle Wind</button> -->
        <button id="map0_current"   onClick="toggle(0, 'CURRENT')">Toggle Current</button>
        <br>
        <button id="map0_sealevel_popup" onClick="openPopup(0, 'SEALEVEL')">Open Sea Level</button>
        <!-- <button id="map0_wind_popup"     onClick="openPopup(0, 'WIND')">Open Wind</button> -->
        <button id="map0_current_popup"  onClick="openPopup(0, 'CURRENT')">Open Current</button>
        <br>
        <button id="map0_sealevel_popup" onClick="closePopup(0, 'SEALEVEL')">Close Sea Level</button>
        <!-- <button id="map0_wind_popup"     onClick="closePopup(0, 'WIND')">Close Wind</button> -->
        <button id="map0_current_popup"  onClick="closePopup(0, 'CURRENT')">Close Current</button>
    </td>
    <td>
        <button id="map1_sealevel"  onClick="toggle(1, 'SEALEVEL')">Toggle Sea Level</button>
        <!-- <button id="map1_wind"      onClick="toggle(1, 'WIND')">Toggle Wind</button> -->
        <button id="map1_current"   onClick="toggle(1, 'CURRENT')">Toggle Current</button>
        <br>
        <button id="map0_sealevel_popup" onClick="openPopup(1, 'SEALEVEL')">Open Sea Level</button>
        <!-- <button id="map0_wind_popup"     onClick="openPopup(1, 'WIND')">Open Wind</button> -->
        <button id="map0_current_popup"  onClick="openPopup(1, 'CURRENT')">Open Current</button>
        <br>
        <button id="map0_sealevel_popup" onClick="closePopup(1, 'SEALEVEL')">Close Sea Level</button>
        <!-- <button id="map0_wind_popup"     onClick="closePopup(1, 'WIND')">Close Wind</button> -->
        <button id="map0_current_popup"  onClick="closePopup(1, 'CURRENT')">Close Current</button>
    </td>
 </tr>
 
 </table>





	<script src="bower_components.js"></script>
	<script src="../src/fcoo-observations.js"></script>
	<script src="../src/location-1.js"></script>
	<script src="../src/location-2-highcharts.js"></script>
	<script src="../src/observation-group.js"></script>
	<script src="../src/station-1.js"></script>
	<script src="../src/station-2-highcharts.js"></script>

    
    <!-- <script src="../src/leaflet-danskehavnelods.js"></script> -->
	<script>
        i18next.init();
        i18next.changeLanguage('en');

        //ONLY WHEN PUSH TO GITHUB        
        window.fcoo.DEMO_VERSION = true;


//HER        window.fcoo.LOCAL_DATA = !window.fcoo.DEMO_VERSION;


        Promise.defaultErrorHandler = function( error ){
            console.log('*********************');
            console.log('DEFAULT error-handler');
            console.log('status=', error.status);
            console.log('url=', error.url);
            console.log('text=', error.text);
            console.log(error);
            console.log('*********************');
        }

    //latLngFormat.setFormat(window.latLngFormat.LATLNGFORMAT_UTM);
    //latLngFormat.setFormat(window.latLngFormat.LATLNGFORMAT_MGRS);
    //latLngFormat.setFormat(window.latLngFormat.LATLNGFORMAT_NAC);


    latLngFormat.setFormat(window.latLngFormat.LATLNGFORMAT_DMSS);
    //latLngFormat.setFormat(window.latLngFormat.LATLNGFORMAT_DMM);
    //latLngFormat.setFormat(window.latLngFormat.LATLNGFORMAT_DD);

    var fcooObservation, maps = [];

    function toggle(mapIndex, groupId){
        fcooObservation.observationGroups[groupId].toggle(maps[mapIndex]);
    }

    function openPopup(mapIndex, groupId){
        fcooObservation.openVisiblePopup(groupId, maps[mapIndex]);
    }

    function closePopup(mapIndex, groupId){
        fcooObservation.closeVisiblePopup(groupId, maps[mapIndex]);
    }


    $(function() { 
	    maps.push( L.map('map0').setView([56.2, 11.5], 6) );
		L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			minZoom: 3, maxZoom: 12,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</a>'
        }).addTo(maps[0]);

	    maps.push( L.map('map1').setView([56.2, 11.5], 6) );
		L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			minZoom: 3, maxZoom: 12,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</a>'
        }).addTo(maps[1]);

       
        
//HER        window.fcoo.LOCAL_DATA = window.fcoo.DEMO_VERSION;
		fcooObservation = new window.fcoo.FCOOObservations({
            fileName:['observations-sealevel.json',/* 'observations-wind_TEST.json', */'observations-current_TEST.json'],
            lastObservationFileName : 'LastObservations_test.json',
        });
//HER        window.fcoo.LOCAL_DATA = false;

        var geoJSON0 = fcooObservation.geoJSON().addTo(maps[0]);

        var geoJSON1 = fcooObservation.geoJSON().addTo(maps[1]);
        fcooObservation.show('CURRENT', maps[1]);


        setTimeout(function(){
            geoJSON1.remove();
        }, 10000);

        setTimeout(function(){
            geoJSON1.addTo(maps[1]);
        }, 12000);
        
        
        
        fcoo.promiseList.options.finally = function(){
            fcoo.globalSetting.load(null, function(){
                i18next.changeLanguage('da');
            });
        };

        fcoo.promiseList.promiseAll();
    });

	</script>
</body>
</html>
